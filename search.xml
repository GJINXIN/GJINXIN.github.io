<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Bootstrap框架的导入及使用</title>
    <url>/2020/03/07/Bootstrap%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AF%BC%E5%85%A5%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h3 id="下载及导入"><a href="#下载及导入" class="headerlink" title="下载及导入"></a>下载及导入</h3><p><a href="https://v3.bootcss.com/" target="_blank" rel="noopener">Bootstrap下载</a>，下载后解压将 css、fonts、js 文件夹复制到 static web  项目下，导入便完成；同时需要导入jquery  jar包，下载后放入 js 文件夹即可；</p>
<h3 id="页面引入资源文件"><a href="#页面引入资源文件" class="headerlink" title="页面引入资源文件"></a>页面引入资源文件</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPEhtml&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">htmllang="zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">metacharset="utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">metahttp-equiv="X-UA-Compatible"content="IE=edge"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">metaname="viewport"content="width=device-width,initial-scale=1"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>BootstrapHelloWorld<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Bootstrap--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">linkhref="css</span>/<span class="attr">bootstrap.min.css</span>"<span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--jQuery(Bootstrap的所有JavaScript插件都依赖jQuery，所以必须放在前边)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scriptsrc="js</span>/<span class="attr">jquery-3.2.1.min.js</span>"&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--加载Bootstrap的所有JavaScript插件。你也可以根据需要只加载单个插件。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scriptsrc="js</span>/<span class="attr">bootstrap.min.js</span>"&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>你好，世界！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="编写页面"><a href="#编写页面" class="headerlink" title="编写页面"></a>编写页面</h3><p>Bootstrap定义了很多 css 样式和 js 插件，可以使用这些样式和插件得到丰富的页面效果。<br>响应式布局使得同一套页面可以兼容不同分辨率的设备，依赖于栅格系统。<br>具体样式和插件的使用可参考官网文档。</p>
]]></content>
      <categories>
        <category>JAVAWeb</category>
      </categories>
      <tags>
        <tag>前端</tag>
      </tags>
  </entry>
  <entry>
    <title>Druid数据库连接池工具类的编写</title>
    <url>/2020/03/06/Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%B7%A5%E5%85%B7%E7%B1%BB%E7%9A%84%E7%BC%96%E5%86%99/</url>
    <content><![CDATA[<h3 id="封装工具类"><a href="#封装工具类" class="headerlink" title="封装工具类"></a>封装工具类</h3><p>为了减少代码工作量，将JDBC注册、获取连接、释放连接封装为一个工具类；<br>具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义成员变量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//加载配置文件</span></span><br><span class="line">            Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">            pro.load(JDBCUtils.class.getClassLoader().getResourceAsStream("druid.properties"));</span><br><span class="line">            <span class="comment">//获取DataSource</span></span><br><span class="line">            ds = DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt,Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(stmt != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, Statement stmt, Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(stmt != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取连接池方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">static</span> DataSource <span class="title">getDataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="调用工具类"><a href="#调用工具类" class="headerlink" title="调用工具类"></a>调用工具类</h3><p>调用工具类具体实例如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidDemo2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取连接</span></span><br><span class="line">            conn = JDBCUtils.getConnection();</span><br><span class="line">            <span class="comment">//定义sql</span></span><br><span class="line">            String sql = <span class="string">"insert into account values(null,?,?)"</span>;</span><br><span class="line">            <span class="comment">//获取pstmt对象</span></span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//给？赋值</span></span><br><span class="line">            pstmt.setString(<span class="number">1</span>,<span class="string">"王五"</span>);</span><br><span class="line">            pstmt.setDouble(<span class="number">2</span>,<span class="number">3000</span>);</span><br><span class="line">            <span class="comment">//执行sql</span></span><br><span class="line">            <span class="keyword">int</span> count = pstmt.executeUpdate();</span><br><span class="line">            System.out.println(count);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//释放资源</span></span><br><span class="line">            JDBCUtils.close(pstmt,conn);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>JAVAWeb</category>
      </categories>
      <tags>
        <tag>JDBC</tag>
        <tag>Druid</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBC-sql注入的安全性问题</title>
    <url>/2020/03/06/JDBC-sql%E6%B3%A8%E5%85%A5%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h3 id="sql注入的安全性问题"><a href="#sql注入的安全性问题" class="headerlink" title="sql注入的安全性问题"></a>sql注入的安全性问题</h3><p>在使用 Statement 类执行 sql 对象时，拼接的 sql 语句可能会有特殊关键子参与字符串拼接，造成数据库信息泄露等问题。</p>
<p>使用 Statement 类的 sql 语句格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String sql = <span class="string">"select *from admin where name = '"</span>+username+<span class="string">"' and password = '"</span>+password+<span class="string">"'"</span>;</span><br></pre></td></tr></table></figure>

<p>当遇到 sql 注入语句：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">请输入用户名:</span><br><span class="line">abcdefg</span><br><span class="line">请输入密码：</span><br><span class="line">s<span class="string">' or '</span>a<span class="string">' = '</span>a</span><br><span class="line">select * from user where username = <span class="string">'abcdefg'</span> and password = <span class="string">'s'</span> or <span class="string">'a'</span> = <span class="string">'a'</span></span><br><span class="line">登录成功！</span><br></pre></td></tr></table></figure>

<p>可以看到 sql 语句不管用户名和密码是什么，该语句都会正确执行，登录成功并获得所有用户信息！</p>
<h3 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h3><p>为了避免恶意的 sql 注入，就要用到 PreparedStatement 类：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String sql = <span class="string">"select *from admin where aname = ? and apassword = ?"</span>;</span><br></pre></td></tr></table></figure>

<p>执行语句为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">pstmt = conn.prepareStatement(sql);</span><br></pre></td></tr></table></figure>

<p>赋值语句为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">pstmt.setString(<span class="number">1</span>,username);</span><br><span class="line">pstmt.setString(<span class="number">2</span>,password);</span><br></pre></td></tr></table></figure>

<p>执行结果为：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">请输入用户名:</span><br><span class="line">abcdefg</span><br><span class="line">请输入密码：</span><br><span class="line">s<span class="string">' or '</span>a<span class="string">' = '</span>a</span><br><span class="line">登录失败，用户名或密码错误！</span><br></pre></td></tr></table></figure>

<p>成功避免了 sql 注入。</p>
]]></content>
      <categories>
        <category>JAVAWeb</category>
      </categories>
      <tags>
        <tag>JDBC</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBC工具类的编写与调用</title>
    <url>/2020/03/06/JDBC%E5%B7%A5%E5%85%B7%E7%B1%BB%E7%9A%84%E7%BC%96%E5%86%99%E4%B8%8E%E8%B0%83%E7%94%A8/</url>
    <content><![CDATA[<h3 id="封装工具类"><a href="#封装工具类" class="headerlink" title="封装工具类"></a>封装工具类</h3><p>为了减少代码工作量，将JDBC注册、获取连接、释放连接封装为一个工具类；<br>具体代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> String driver;</span><br><span class="line">        <span class="keyword">static</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">                <span class="comment">//获取src路径下的文件的方式</span></span><br><span class="line">                ClassLoader classLoader = JDBCUtils<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">                URL res = classLoader.getResource(<span class="string">"jdbc.properties"</span>);</span><br><span class="line">                String path = res.getPath();</span><br><span class="line">                System.out.println(path);</span><br><span class="line">                <span class="comment">//加载文件</span></span><br><span class="line">                pro.load(<span class="keyword">new</span> FileReader(path));</span><br><span class="line"></span><br><span class="line">                url = pro.getProperty(<span class="string">"url"</span>);</span><br><span class="line">                user = pro.getProperty(<span class="string">"user"</span>);</span><br><span class="line">                password = pro.getProperty(<span class="string">"password"</span>);</span><br><span class="line">                driver = pro.getProperty(<span class="string">"driver"</span>);</span><br><span class="line">                Class.forName(driver);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 获取连接</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> DriverManager.getConnection(url,user,password);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//释放连接</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt,Connection conn)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">if</span>(conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//重载close()</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, Statement stmt, Connection conn)</span></span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(rs != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(stmt != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stmt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>src 下 jdbc.properties 内容如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">url=jdbc:mysql:<span class="comment">///xxx?serverTimezone=UTC </span></span><br><span class="line">user=root</span><br><span class="line">password=root</span><br><span class="line">driver=com.mysql.cj.jdbc.Driver</span><br></pre></td></tr></table></figure>

<p>如果你数据库连接默认为 locahost:3306 则可以简写为///+数据库名称，?serverTimezone=UTC  是为了避免时区不同问题；</p>
<h3 id="调用工具类"><a href="#调用工具类" class="headerlink" title="调用工具类"></a>调用工具类</h3><p>调用工具类具体实例如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCdemo08</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Emp&gt; list = <span class="keyword">new</span> JDBCdemo08().findAll();</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        System.out.println(list.size());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        List&lt;Emp&gt; list = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取连接</span></span><br><span class="line">            conn = JDBCUtils.getConnection();</span><br><span class="line">            <span class="comment">//执行sql语句</span></span><br><span class="line">            String sql = <span class="string">"select *from admin"</span>;</span><br><span class="line">            stmt = conn.createStatement();</span><br><span class="line">            <span class="comment">//获取返回列表</span></span><br><span class="line">            rs = stmt.executeQuery(sql);</span><br><span class="line">            Emp emp = <span class="keyword">null</span>;</span><br><span class="line">            list = <span class="keyword">new</span> ArrayList&lt;Emp&gt;();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="keyword">int</span> id = rs.getInt(<span class="string">"aid"</span>);</span><br><span class="line">                String name = rs.getString(<span class="string">"aname"</span>);</span><br><span class="line">                <span class="keyword">int</span> password = rs.getInt(<span class="string">"apassword"</span>);</span><br><span class="line">                String sex = rs.getString(<span class="string">"asex"</span>);</span><br><span class="line">                <span class="keyword">int</span> age = rs.getInt(<span class="string">"aage"</span>);</span><br><span class="line">                emp = <span class="keyword">new</span> Emp();</span><br><span class="line">                emp.setId(id);</span><br><span class="line">                emp.setName(name);</span><br><span class="line">                emp.setSex(sex);</span><br><span class="line">                emp.setPassword(password);</span><br><span class="line">                list.add(emp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtils.close(rs,stmt,conn);  <span class="comment">//释放资源</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>JAVAWeb</category>
      </categories>
      <tags>
        <tag>JDBC</tag>
      </tags>
  </entry>
  <entry>
    <title>Python爬虫解析多级嵌套json</title>
    <url>/2020/03/03/%E8%82%BA%E7%82%8E%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%E5%B9%B6%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<h3 id="Python爬虫解析多级嵌套json"><a href="#Python爬虫解析多级嵌套json" class="headerlink" title="Python爬虫解析多级嵌套json"></a>Python爬虫解析多级嵌套json</h3><p>最近刚接触Python爬虫，正好最近肺炎在全国蔓延，所以准备从网站爬取肺炎实时数据，并解析自己想要的数据。获取json数据网址为  <a href="https://m.look.360.cn/events/feiyan" target="_blank" rel="noopener">https://m.look.360.cn/events/feiyan</a></p>
<p>爬取网址：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    url=<span class="string">'https://m.look.360.cn/events/feiyan'</span></span><br><span class="line">    headers = &#123;<span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) 		    AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36 QIHU 360EE'</span>&#125;</span><br><span class="line">    parse_page(url)</span><br></pre></td></tr></table></figure>

<p>解析并保存json格式文件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">state &#x3D; json.loads(response.content)</span><br><span class="line">with open(&quot;feiyan.json&quot;, &quot;w&quot;,encoding&#x3D;&#39;utf-8&#39;) as f:</span><br><span class="line">	f.write(json.dumps(state,indent&#x3D;2,ensure_ascii&#x3D;False))</span><br><span class="line">    print(&quot;保存成功&quot;)</span><br></pre></td></tr></table></figure>

<p>获取json文件后发现为嵌套格式，具体格式大家可以打开上方网址查看：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> &quot;data&quot;:[</span><br><span class="line"> 		&#123;</span><br><span class="line"> 		 &quot;data&quot;:&#123;省份&#125;</span><br><span class="line">         &quot;citys&quot;:[</span><br><span class="line">         		  &#123;城市&#125;&#123;&#125;.....</span><br><span class="line">         		 ]		 </span><br><span class="line"> 		&#125;</span><br><span class="line"> 		&#123;</span><br><span class="line"> 		 &quot;data&quot;:&#123;省份&#125;</span><br><span class="line">         &quot;citys&quot;:[</span><br><span class="line">         		  &#123;城市&#125;&#123;&#125;.....</span><br><span class="line">         		 ]		 </span><br><span class="line"> 		&#125;</span><br><span class="line"> &quot;country&quot;:[</span><br><span class="line"> 			&#123;其他国家&#125;</span><br><span class="line"> 		   ]	</span><br><span class="line"> 		]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="\images\feiyan1.png" alt="Alt text" />

<h4 id="解析数据"><a href="#解析数据" class="headerlink" title="解析数据"></a>解析数据</h4><p>因为我只想获取各个城市的名称、感染人数、治愈人数和死亡人数，所以需要嵌套循环来获取并逐个输出。代码如下：</p>
<p>省级数据获取：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">provincename = state[<span class="string">'data'</span>][i][<span class="string">'data'</span>][<span class="string">'provinceName'</span>] </span><br><span class="line">confirmedCount = state[<span class="string">'data'</span>][i][<span class="string">'data'</span>][<span class="string">'confirmedCount'</span>]</span><br><span class="line">curedCount = state[<span class="string">'data'</span>][i][<span class="string">'data'</span>][<span class="string">'curedCount'</span>] </span><br><span class="line">deadCount = state[<span class="string">'data'</span>][i][<span class="string">'data'</span>][<span class="string">'deadCount'</span>]</span><br></pre></td></tr></table></figure>

<p>城市数据获取：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cityName = state[<span class="string">'data'</span>][i][<span class="string">'cities'</span>][j][<span class="string">'cityName'</span>]</span><br><span class="line">diagnosed = state[<span class="string">'data'</span>][i][<span class="string">'cities'</span>][j][<span class="string">'diagnosed'</span>]</span><br><span class="line">cured = state[<span class="string">'data'</span>][i][<span class="string">'cities'</span>][j][<span class="string">'cured'</span>]</span><br><span class="line">died = state[<span class="string">'data'</span>][i][<span class="string">'cities'</span>][j][<span class="string">'died'</span>]</span><br></pre></td></tr></table></figure>

<p>国外城市数据获取：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">countryname = state[<span class="string">'country'</span>][c][<span class="string">'provinceName'</span>]</span><br><span class="line">diagnosed = state[<span class="string">'country'</span>][c][<span class="string">'diagnosed'</span>]</span><br><span class="line">cured = state[<span class="string">'country'</span>][c][<span class="string">'cured'</span>]</span><br><span class="line">died = state[<span class="string">'country'</span>][c][<span class="string">'died'</span>]</span><br></pre></td></tr></table></figure>

<p>以上就是嵌套json解析格式。</p>
<p>输出效果：</p>
<img src="\images\feiyan2.png" alt="Alt text" />



<p><strong>源码地址：</strong><a href="https://github.com/GJINXIN/python-web-scraping/blob/master/肺炎数据解析并存储.py" target="_blank" rel="noopener">github</a></p>
]]></content>
      <categories>
        <category>爬虫</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>爬虫</tag>
        <tag>json</tag>
      </tags>
  </entry>
  <entry>
    <title>About me</title>
    <url>/2020/03/02/about/</url>
    <content><![CDATA[<p>|  A coder，live in Hohhot，China</p>
<p>姓名：郭金鑫</p>
<p>现居：呼和浩特</p>
<p>GitHub：<a href="https://github.com/GJINXIN/" target="_blank" rel="noopener">GJINXIN</a></p>
<p>QQ：1782561167</p>
<p>微信：gjx1782561167</p>
<img src="https://i.loli.net/2020/03/06/bPvysxmAFniJgzW.png" alt="Alt text" style="zoom:60%;" />]]></content>
      <tags>
        <tag>随笔</tag>
      </tags>
  </entry>
  <entry>
    <title>我的第一篇博客--洁癖Man</title>
    <url>/2020/03/02/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2--%E6%B4%81%E7%99%96Man/</url>
    <content><![CDATA[<p>​      以前在校期间用过博客园 <a href="https://www.cnblogs.com/GJIN/" target="_blank" rel="noopener">洁癖Man</a>，但因为没有养成良好的学习记录习惯，发表的博客不是太多，写的项目遇到的问题解决后都没有记录，而且项目还丢失了一部分。所以在github上搭建一个可以自定义，记录自己平常进步、项目与生活的一个个人博客，在记录自己的进步的同时，希望可以给他人带来一些帮助。</p>
<h2 id="目前已掌握的技能"><a href="#目前已掌握的技能" class="headerlink" title="目前已掌握的技能"></a>目前已掌握的技能</h2><h3 id="语言类"><a href="#语言类" class="headerlink" title="语言类"></a>语言类</h3><p>C、C++、Java、Python；</p>
<h3 id="Java-Web"><a href="#Java-Web" class="headerlink" title="Java Web"></a>Java Web</h3><p>JSP+Servlet+JDBC、网页开发；</p>
<h3 id="移动端"><a href="#移动端" class="headerlink" title="移动端"></a>移动端</h3><p>H5开发、Android开发、安卓混合开发、okhttp；</p>
<h3 id="常用工具类"><a href="#常用工具类" class="headerlink" title="常用工具类"></a>常用工具类</h3><p>IDEA、Eclipse、Android Studio、Wex5、Vscode、Navicat；</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>爬虫；</p>
<h2 id="已做项目"><a href="#已做项目" class="headerlink" title="已做项目"></a>已做项目</h2><h3 id="掌上医院系统-计算所试验室"><a href="#掌上医院系统-计算所试验室" class="headerlink" title="掌上医院系统 (计算所试验室)"></a>掌上医院系统 (计算所试验室)</h3><p>掌上医院系统是一个改变传统挂号和优化传统医疗程序的系统，可在网上进行挂号和健康咨询等，为患者合理安排时间，且可以查看医院简介和医生介绍，让患者深层次了解医院，是一个真正意义上的面相门诊全流程的移动医联平台，完全贴合医院就诊流程而设计，并且在提高患者满意度的前提下，也提高了医生的服务水平，从问诊出发，以消息通知为核心，覆盖门诊的就医流程，为问诊人提供便捷的门诊服务。</p>
<h3 id="海外留学生信息交流平台"><a href="#海外留学生信息交流平台" class="headerlink" title="海外留学生信息交流平台"></a>海外留学生信息交流平台</h3><p>为海外留学生打造的一个生活、学习交流平台，包括房屋车辆租赁、物品交易、学习交流、活动发布等功能的平台，包括移动端。</p>
<h3 id="公司工资管理系统"><a href="#公司工资管理系统" class="headerlink" title="公司工资管理系统"></a>公司工资管理系统</h3><h3 id="学生信息管理系统"><a href="#学生信息管理系统" class="headerlink" title="学生信息管理系统"></a>学生信息管理系统</h3><p> 后面会一直补充该篇博客，更新自己的技能掌握情况。</p>
]]></content>
      <categories>
        <category>学习</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
</search>
